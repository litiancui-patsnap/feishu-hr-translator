# Feishu HR Translator - Web UI å¿«é€Ÿå¼€å§‹

> 5åˆ†é’Ÿå¯åŠ¨å®Œæ•´çš„ Web ç•Œé¢ï¼ˆç™»å½•ç³»ç»Ÿ + ä»ªè¡¨ç›˜ï¼‰

---

## ğŸ¯ åŠŸèƒ½é¢„è§ˆ

å·²å®ç°ï¼š
- âœ… ç”¨æˆ·ç™»å½•/ç™»å‡ºï¼ˆJWTè®¤è¯ï¼‰
- âœ… ä»ªè¡¨ç›˜æ•°æ®å±•ç¤º
- âœ… ç»Ÿè®¡å¡ç‰‡ï¼ˆæœ¬å‘¨æŠ¥å‘Šã€æœ¬æœˆæŠ¥å‘Šã€é«˜é£é™©é¡¹ã€OKRå®Œæˆåº¦ï¼‰
- âœ… æœ€è¿‘æŠ¥å‘Šåˆ—è¡¨
- âœ… å“åº”å¼è®¾è®¡

---

## ğŸ“¦ å®‰è£…ä¾èµ–

### 1. åç«¯ä¾èµ–

```bash
cd /path/to/feishu-hr-translator

# å®‰è£…é¢å¤–çš„ä¾èµ–
pip install \
  sqlalchemy \
  passlib[bcrypt] \
  python-jose[cryptography] \
  python-multipart
```

### 2. å‰ç«¯ä¾èµ–

```bash
cd frontend

# å®‰è£… Node.js ä¾èµ–ï¼ˆé¦–æ¬¡éœ€è¦ï¼‰
npm install
```

---

## ğŸš€ å¯åŠ¨æœåŠ¡

### æ–¹å¼ 1ï¼šå¼€å‘æ¨¡å¼ï¼ˆæ¨èï¼‰

**ç»ˆç«¯ 1 - åç«¯**ï¼š
```bash
cd /path/to/feishu-hr-translator

# è¿è¡Œåç«¯æœåŠ¡
python -m backend.web_main
```

åç«¯å°†åœ¨ `http://localhost:8080` å¯åŠ¨

**ç»ˆç«¯ 2 - å‰ç«¯**ï¼š
```bash
cd frontend

# è¿è¡Œå‰ç«¯å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯å°†åœ¨ `http://localhost:3000` å¯åŠ¨ï¼Œå¹¶è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨

---

### æ–¹å¼ 2ï¼šç”Ÿäº§æ¨¡å¼

```bash
# 1. æ„å»ºå‰ç«¯
cd frontend
npm run build

# 2. å‰ç«¯é™æ€æ–‡ä»¶å°†ç”Ÿæˆåˆ° frontend/dist/

# 3. å¯åŠ¨åç«¯ï¼ˆä¼šè‡ªåŠ¨serveå‰ç«¯æ–‡ä»¶ï¼‰
cd ..
python -m backend.web_main
```

è®¿é—® `http://localhost:8080`

---

## ğŸ‘¤ åˆ›å»ºç®¡ç†å‘˜è´¦å·

é¦–æ¬¡ä½¿ç”¨éœ€è¦åˆ›å»ºç®¡ç†å‘˜è´¦å·ï¼š

```python
# scripts/create_admin.py
import sys
sys.path.insert(0, '.')

from backend.database import SessionLocal, init_db
from backend.models.user import User
from backend.auth.password import get_password_hash

# Initialize database
init_db()

# Create admin user
db = SessionLocal()
admin = User(
    username="admin",
    hashed_password=get_password_hash("admin123"),
    email="admin@example.com",
    full_name="ç³»ç»Ÿç®¡ç†å‘˜",
    role="admin",
    is_active=True,
)
db.add(admin)
db.commit()
print("âœ… ç®¡ç†å‘˜è´¦å·åˆ›å»ºæˆåŠŸ")
print("ç”¨æˆ·å: admin")
print("å¯†ç : admin123")
db.close()
```

è¿è¡Œè„šæœ¬ï¼š
```bash
python scripts/create_admin.py
```

---

## ğŸ”‘ ç™»å½•ç³»ç»Ÿ

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000`ï¼ˆå¼€å‘æ¨¡å¼ï¼‰
2. è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼š
   - ç”¨æˆ·åï¼š`admin`
   - å¯†ç ï¼š`admin123`
3. ç‚¹å‡»"ç™»å½•"

ç™»å½•æˆåŠŸåä¼šè‡ªåŠ¨è·³è½¬åˆ°ä»ªè¡¨ç›˜ï¼

---

## ğŸ“Š ä»ªè¡¨ç›˜åŠŸèƒ½

### ç»Ÿè®¡å¡ç‰‡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æœ¬å‘¨æŠ¥å‘Š 42 â”‚ æœ¬æœˆæŠ¥å‘Š186 â”‚ é«˜é£é™©é¡¹ 8  â”‚ OKRå®Œæˆ73%  â”‚
â”‚  â†‘ 5.2%    â”‚  â†“ 2.1%    â”‚  â†“ 15%     â”‚  â†‘ 3%      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æœ€è¿‘æŠ¥å‘Šåˆ—è¡¨
- æäº¤äºº
- å‘¨æœŸç±»å‹ï¼ˆæ—¥æŠ¥/å‘¨æŠ¥/æœˆæŠ¥ï¼‰
- é£é™©ç­‰çº§ï¼ˆé«˜/ä¸­/ä½ï¼‰
- HR å‹å¥½æ€»ç»“
- æ“ä½œæŒ‰é’®

---

## ğŸ—„ï¸ æ•°æ®åº“æ–‡ä»¶ä½ç½®

SQLite æ•°æ®åº“è‡ªåŠ¨åˆ›å»ºåœ¨ï¼š
```
data/hr_translator.db
```

æŸ¥çœ‹æ•°æ®åº“å†…å®¹ï¼š
```bash
sqlite3 data/hr_translator.db

# æŸ¥çœ‹ç”¨æˆ·è¡¨
SELECT * FROM users;

# æŸ¥çœ‹ä¼šè¯è¡¨
SELECT * FROM user_sessions;
```

---

## ğŸ”§ é…ç½®è¯´æ˜

### åç«¯é…ç½®

**backend/auth/jwt_handler.py** - JWTé…ç½®ï¼š
```python
SECRET_KEY = "your-secret-key-change-in-production"  # âš ï¸ ç”Ÿäº§ç¯å¢ƒè¯·ä¿®æ”¹
ALGORITHM = "HS256"
ACCESS_TOKEN_EXPIRE_MINUTES = 60 * 24 * 7  # 7 days
```

**backend/database.py** - æ•°æ®åº“é…ç½®ï¼š
```python
# å¼€å‘ç¯å¢ƒï¼ˆé»˜è®¤ï¼‰
DATABASE_URL = "sqlite:///./data/hr_translator.db"

# ç”Ÿäº§ç¯å¢ƒï¼ˆPostgreSQLï¼‰
# DATABASE_URL = "postgresql://user:password@localhost/hr_translator"
```

### å‰ç«¯é…ç½®

**frontend/vite.config.ts** - APIä»£ç†ï¼š
```typescript
server: {
  port: 3000,
  proxy: {
    '/api': {
      target: 'http://localhost:8080',  // åç«¯åœ°å€
      changeOrigin: true,
    },
  },
}
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šåç«¯å¯åŠ¨å¤±è´¥ - ModuleNotFoundError

**é”™è¯¯**ï¼š`ModuleNotFoundError: No module named 'sqlalchemy'`

**è§£å†³**ï¼š
```bash
pip install sqlalchemy passlib[bcrypt] python-jose[cryptography]
```

---

### é—®é¢˜ 2ï¼šå‰ç«¯è¿æ¥åç«¯å¤±è´¥ - CORSé”™è¯¯

**é”™è¯¯**ï¼š`Access to XMLHttpRequest has been blocked by CORS policy`

**è§£å†³**ï¼šç¡®è®¤åç«¯ CORS é…ç½®æ­£ç¡®ï¼ˆå·²åœ¨ `backend/web_main.py` ä¸­é…ç½®ï¼‰

---

### é—®é¢˜ 3ï¼šç™»å½•å¤±è´¥ - 401 Unauthorized

**åŸå› **ï¼š
1. ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯
2. ç®¡ç†å‘˜è´¦å·æœªåˆ›å»º

**è§£å†³**ï¼š
```bash
# é‡æ–°åˆ›å»ºç®¡ç†å‘˜è´¦å·
python scripts/create_admin.py

# æˆ–æ‰‹åŠ¨æ’å…¥æ•°æ®åº“
sqlite3 data/hr_translator.db
```

---

### é—®é¢˜ 4ï¼šæ•°æ®åº“è¡¨ä¸å­˜åœ¨

**é”™è¯¯**ï¼š`no such table: users`

**è§£å†³**ï¼š
```python
# Python äº¤äº’å¼ç¯å¢ƒ
from backend.database import init_db
init_db()
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
feishu-hr-translator/
â”œâ”€â”€ backend/                    # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ api/                   # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth.py           # ç™»å½•/ç™»å‡º/æ³¨å†Œ
â”‚   â”‚   â”œâ”€â”€ dashboard.py      # ä»ªè¡¨ç›˜æ•°æ®
â”‚   â”‚   â””â”€â”€ schemas.py        # API Schema
â”‚   â”œâ”€â”€ auth/                  # è®¤è¯æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ jwt_handler.py    # JWT å¤„ç†
â”‚   â”‚   â””â”€â”€ password.py       # å¯†ç å“ˆå¸Œ
â”‚   â”œâ”€â”€ models/                # æ•°æ®åº“æ¨¡å‹
â”‚   â”‚   â””â”€â”€ user.py           # User, UserSession
â”‚   â”œâ”€â”€ database.py            # æ•°æ®åº“é…ç½®
â”‚   â””â”€â”€ web_main.py            # ä¸»åº”ç”¨å…¥å£
â”‚
â”œâ”€â”€ frontend/                   # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/              # API å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts    # Axiosé…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts      # è®¤è¯API
â”‚   â”‚   â”‚   â””â”€â”€ dashboard.ts # ä»ªè¡¨ç›˜API
â”‚   â”‚   â”œâ”€â”€ contexts/         # React Context
â”‚   â”‚   â”‚   â””â”€â”€ AuthContext.tsx
â”‚   â”‚   â”œâ”€â”€ pages/            # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginPage.tsx      # ç™»å½•é¡µ
â”‚   â”‚   â”‚   â””â”€â”€ DashboardPage.tsx  # ä»ªè¡¨ç›˜
â”‚   â”‚   â”œâ”€â”€ types/            # TypeScript ç±»å‹
â”‚   â”‚   â”œâ”€â”€ App.tsx           # ä¸»åº”ç”¨
â”‚   â”‚   â””â”€â”€ main.tsx          # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”‚
â”œâ”€â”€ data/                       # æ•°æ®ç›®å½•
â”‚   â””â”€â”€ hr_translator.db       # SQLite æ•°æ®åº“
â”‚
â””â”€â”€ docs/
    â”œâ”€â”€ WEB_UI_DESIGN.md       # å®Œæ•´è®¾è®¡æ–‡æ¡£
    â””â”€â”€ WEB_UI_QUICKSTART.md   # æœ¬æ–‡æ¡£
```

---

## ğŸ¨ ç•Œé¢æˆªå›¾

### ç™»å½•é¡µé¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                        â”‚
â”‚    Feishu HR Translator                â”‚
â”‚    AIé©±åŠ¨çš„HRæŠ¥å‘Šç¿»è¯‘ç³»ç»Ÿ              â”‚
â”‚                                        â”‚
â”‚   ç”¨æˆ·å: [__admin_______________]     â”‚
â”‚   å¯†ç :   [__admin123___________]      â”‚
â”‚   [âœ“] è®°ä½æˆ‘ï¼ˆ7å¤©ï¼‰                    â”‚
â”‚                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚        ç™»å½•                   â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                        â”‚
â”‚   æ¼”ç¤ºè´¦å·ï¼šadmin / admin123           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä»ªè¡¨ç›˜
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Feishu HR Translator        æ¬¢è¿, admin    [é€€å‡º]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š ä»ªè¡¨ç›˜                                           â”‚
â”‚                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚æœ¬å‘¨æŠ¥å‘Š42â”‚æœ¬æœˆ186   â”‚é«˜é£é™© 8  â”‚OKR 73%   â”‚     â”‚
â”‚ â”‚ â†‘ 5.2%  â”‚ â†“ 2.1%  â”‚ â†“ 15%   â”‚ â†‘ 3%    â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                    â”‚
â”‚ ğŸ“ æœ€è¿‘æŠ¥å‘Š                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚ â”‚ å¼ ä¸‰ â”‚ å‘¨æŠ¥ â”‚ ğŸŸ¡ä¸­ â”‚ æœ¬å‘¨å®Œæˆ...  â”‚ [æŸ¥çœ‹]â”‚      â”‚
â”‚ â”‚ æå›› â”‚ å‘¨æŠ¥ â”‚ ğŸŸ¢ä½ â”‚ æœ¬å‘¨ä¼˜åŒ–...  â”‚ [æŸ¥çœ‹]â”‚      â”‚
â”‚ â”‚ ç‹äº” â”‚ å‘¨æŠ¥ â”‚ ğŸ”´é«˜ â”‚ æœ¬å‘¨è¿›è¡Œ...  â”‚ [æŸ¥çœ‹]â”‚      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš¢ éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

### 1. ä½¿ç”¨ PostgreSQLï¼ˆæ¨èï¼‰

```bash
# å®‰è£… PostgreSQL
sudo apt install postgresql postgresql-contrib

# åˆ›å»ºæ•°æ®åº“
sudo -u postgres createdb hr_translator

# æ›´æ–°é…ç½®
# backend/database.py:
DATABASE_URL = "postgresql://user:password@localhost/hr_translator"

# å®‰è£…é©±åŠ¨
pip install psycopg2-binary
```

### 2. ä½¿ç”¨ç¯å¢ƒå˜é‡

```bash
# .env.production
DATABASE_URL=postgresql://user:password@localhost/hr_translator
JWT_SECRET_KEY=your-production-secret-key-change-this
API_BASE_URL=https://your-domain.com
```

### 3. ä½¿ç”¨ Docker

```bash
# æ„å»ºé•œåƒ
docker build -t feishu-hr-translator-web .

# è¿è¡Œå®¹å™¨
docker run -p 8080:8080 \
  -e DATABASE_URL=postgresql://... \
  -e JWT_SECRET_KEY=... \
  feishu-hr-translator-web
```

---

## ğŸ“ è·å–å¸®åŠ©

- **è®¾è®¡æ–‡æ¡£**ï¼š[WEB_UI_DESIGN.md](WEB_UI_DESIGN.md)
- **API æ–‡æ¡£**ï¼šè®¿é—® `http://localhost:8080/docs`ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
- **é—®é¢˜åé¦ˆ**ï¼šGitHub Issues

---

## âœ… æ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰ç¡®è®¤ï¼š

- [ ] å·²å®‰è£…æ‰€æœ‰åç«¯ä¾èµ–
- [ ] å·²å®‰è£…æ‰€æœ‰å‰ç«¯ä¾èµ–ï¼ˆnpm installï¼‰
- [ ] å·²åˆ›å»ºç®¡ç†å‘˜è´¦å·
- [ ] æ•°æ®åº“å·²åˆå§‹åŒ–
- [ ] JWT SECRET_KEY å·²ä¿®æ”¹ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- [ ] CORS é…ç½®æ­£ç¡®
- [ ] å‰ç«¯ API_BASE_URL é…ç½®æ­£ç¡®

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹å®Œæ•´è®¾è®¡æ–‡æ¡£æˆ–æäº¤ Issueã€‚
